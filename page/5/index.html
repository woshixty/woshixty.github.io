<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/3.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/3.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="This is xty Blog">
<meta property="og:type" content="website">
<meta property="og:title" content="Hello Programmer">
<meta property="og:url" content="http://example.com/page/5/index.html">
<meta property="og:site_name" content="Hello Programmer">
<meta property="og:description" content="This is xty Blog">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="xty">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/page/5/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>Hello Programmer</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Hello Programmer</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/06/25/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E5%BC%82%E5%B8%B8%E6%95%B0%E6%8D%AE%E6%A3%80%E6%B5%8B/%E5%BC%82%E5%B8%B8%E6%95%B0%E6%8D%AE%E6%A3%80%E6%B5%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/4.png">
      <meta itemprop="name" content="xty">
      <meta itemprop="description" content="This is xty Blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello Programmer">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/06/25/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E5%BC%82%E5%B8%B8%E6%95%B0%E6%8D%AE%E6%A3%80%E6%B5%8B/%E5%BC%82%E5%B8%B8%E6%95%B0%E6%8D%AE%E6%A3%80%E6%B5%8B/" class="post-title-link" itemprop="url">异常检测检测实战</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-06-25 00:00:00" itemprop="dateCreated datePublished" datetime="2021-06-25T00:00:00+00:00">2021-06-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-03-18 09:07:29" itemprop="dateModified" datetime="2022-03-18T09:07:29+00:00">2022-03-18</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">机器学习</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>异常检测实战过程：<br>1、基于anomaly_data.csv，可视化数据分布情况，及其对应高斯分布的概率密度函数<br>2、建立模型，实现异常点数据的预测<br>3、可视化异常检测处理结果<br>4、修改概率分布阈值EllipticEnvelope（contamination）中的contamination，查看阈值改变对结果的影响</p>
</blockquote>
<h3 id="1、加载数据集"><a href="#1、加载数据集" class="headerlink" title="1、加载数据集"></a>1、加载数据集</h3><p>本次实战所用数据集：链接: <a target="_blank" rel="noopener" href="https://pan.baidu.com/s/18IRYPuk6NSU6xW4NyRokpA">https://pan.baidu.com/s/18IRYPuk6NSU6xW4NyRokpA</a>  密码: stug</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># load the data</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">data = pd.read_csv(<span class="string">&#x27;anomaly_data.csv&#x27;</span>)</span><br><span class="line">data.head()</span><br></pre></td></tr></table></figure>



<h3 id="2、将数据可视化"><a href="#2、将数据可视化" class="headerlink" title="2、将数据可视化"></a>2、将数据可视化</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># visualize the data</span></span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</span><br><span class="line">fig1 = plt.figure(figsize=(<span class="number">10</span>, <span class="number">5</span>))</span><br><span class="line">plt.scatter(data.loc[:, <span class="string">&#x27;x1&#x27;</span>], data.loc[:, <span class="string">&#x27;x2&#x27;</span>])</span><br><span class="line">plt.title(<span class="string">&#x27;data&#x27;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;x1&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;x1&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p>图像显示如下：</p>
<img src="https://cos-1301609895.cos.ap-nanjing.myqcloud.com/deep-learning/yichangjiance1.png">



<h3 id="3、定义x1与x2并展示图像"><a href="#3、定义x1与x2并展示图像" class="headerlink" title="3、定义x1与x2并展示图像"></a>3、定义x1与x2并展示图像</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># define x1 and x2</span></span><br><span class="line">x1 = data.loc[:, <span class="string">&#x27;x1&#x27;</span>]</span><br><span class="line">x2 = data.loc[:, <span class="string">&#x27;x2&#x27;</span>]</span><br><span class="line"></span><br><span class="line">fig2 = plt.figure(figsize=(<span class="number">20</span>, <span class="number">5</span>))</span><br><span class="line"></span><br><span class="line">plt.subplot(<span class="number">121</span>)</span><br><span class="line">plt.hist(x1, bins=<span class="number">100</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;x1 distribut&#x27;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;x1&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;counts&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.subplot(<span class="number">122</span>)</span><br><span class="line">plt.hist(x2, bins=<span class="number">100</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;x2 distribut&#x27;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;x2&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;counts&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p>可视化数据如下所示：</p>
<img src="https://cos-1301609895.cos.ap-nanjing.myqcloud.com/deep-learning/yichangjiance2.png">



<h3 id="4、计算x1与x2均值和标准差"><a href="#4、计算x1与x2均值和标准差" class="headerlink" title="4、计算x1与x2均值和标准差"></a>4、计算x1与x2均值和标准差</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># calculate the mean and sigma of x1 and x2</span></span><br><span class="line">x1_mean = x1.mean()</span><br><span class="line">x1_sigma = x1.std()</span><br><span class="line">x2_mean = x2.mean()</span><br><span class="line">x2_sigma = x2.std()</span><br><span class="line">print(x1_mean, x1_sigma, x2_mean, x2_sigma)</span><br></pre></td></tr></table></figure>



<h3 id="5、计算高斯分布的概率密度"><a href="#5、计算高斯分布的概率密度" class="headerlink" title="5、计算高斯分布的概率密度"></a>5、计算高斯分布的概率密度</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># calculate the gaussion distribution p(x)</span></span><br><span class="line"><span class="keyword">from</span> scipy.stats <span class="keyword">import</span> norm</span><br><span class="line">x1_range = np.linspace(<span class="number">0</span>, <span class="number">20</span>, <span class="number">300</span>)</span><br><span class="line">x1_normal = norm.pdf(x1_range, x1_mean, x1_sigma)</span><br><span class="line"></span><br><span class="line">x2_range = np.linspace(<span class="number">0</span>, <span class="number">20</span>, <span class="number">300</span>)</span><br><span class="line">x2_normal = norm.pdf(x2_range, x2_mean, x2_sigma)</span><br></pre></td></tr></table></figure>



<h3 id="6、可视化高斯密度曲线"><a href="#6、可视化高斯密度曲线" class="headerlink" title="6、可视化高斯密度曲线"></a>6、可视化高斯密度曲线</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># visualize the p(x)</span></span><br><span class="line">fig2 = plt.figure(figsize=(<span class="number">20</span>, <span class="number">5</span>))</span><br><span class="line">plt.subplot(<span class="number">121</span>)</span><br><span class="line">plt.plot(x1_range, x1_normal)</span><br><span class="line">plt.title(<span class="string">&#x27;normal p(x1)&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.subplot(<span class="number">122</span>)</span><br><span class="line">plt.plot(x2_range, x2_normal)</span><br><span class="line">plt.title(<span class="string">&#x27;normal p(x2)&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p>高斯密度曲线可视化如下所示：</p>
<img src="https://cos-1301609895.cos.ap-nanjing.myqcloud.com/deep-learning/yichangjiance3.png">



<h3 id="7、建立模型并进行预测"><a href="#7、建立模型并进行预测" class="headerlink" title="7、建立模型并进行预测"></a>7、建立模型并进行预测</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># establish the model and predict</span></span><br><span class="line"><span class="keyword">from</span> sklearn.covariance <span class="keyword">import</span> EllipticEnvelope</span><br><span class="line">ad_model = EllipticEnvelope()</span><br><span class="line">ad_model.fit(data)</span><br><span class="line"></span><br><span class="line"><span class="comment"># make prediction</span></span><br><span class="line">y_predict = ad_model.predict(data)</span><br><span class="line">print(pd.value_counts(y_predict))</span><br></pre></td></tr></table></figure>



<h3 id="8、将预测结果可视化"><a href="#8、将预测结果可视化" class="headerlink" title="8、将预测结果可视化"></a>8、将预测结果可视化</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># visualize the result</span></span><br><span class="line">fig4 = plt.figure(figsize=(<span class="number">10</span>, <span class="number">5</span>))</span><br><span class="line">original_data = plt.scatter(data.loc[:, <span class="string">&#x27;x1&#x27;</span>], data.loc[:, <span class="string">&#x27;x2&#x27;</span>], marker=<span class="string">&#x27;x&#x27;</span>)</span><br><span class="line">anomaly_data = plt.scatter(data.loc[:, <span class="string">&#x27;x1&#x27;</span>][y_predict==<span class="number">-1</span>], data.loc[:, <span class="string">&#x27;x2&#x27;</span>][y_predict==<span class="number">-1</span>], marker=<span class="string">&#x27;o&#x27;</span>, facecolor=<span class="string">&#x27;none&#x27;</span>, edgecolor=<span class="string">&#x27;red&#x27;</span>, s=<span class="number">150</span>)</span><br><span class="line"></span><br><span class="line">plt.title(<span class="string">&#x27;anomaly detection result&#x27;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;x1&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;x2&#x27;</span>)</span><br><span class="line">plt.legend((original_data, anomaly_data), (<span class="string">&#x27;original_data&#x27;</span>, <span class="string">&#x27;anomaly_data&#x27;</span>))</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p>异常结果如下所示：</p>
<img src="https://cos-1301609895.cos.ap-nanjing.myqcloud.com/deep-learning/yichangjiance5.png">





<h3 id="9、修改概率分布阈值，看看影响"><a href="#9、修改概率分布阈值，看看影响" class="headerlink" title="9、修改概率分布阈值，看看影响"></a>9、修改概率分布阈值，看看影响</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ad_model = EllipticEnvelope(contamination=<span class="number">0.02</span>)</span><br><span class="line">ad_model.fit(data)</span><br><span class="line">y_predict = ad_model.predict(data)</span><br></pre></td></tr></table></figure>

<p>将新数据进行可视化：</p>
<img src="https://cos-1301609895.cos.ap-nanjing.myqcloud.com/deep-learning/yichangjiance4.png">



<h3 id="10、小结"><a href="#10、小结" class="headerlink" title="10、小结"></a>10、小结</h3><p>1、通过计算数据各维度对应的高斯分布概率密度函数，可用于寻找数据中的异常点</p>
<p>2、通过修改概率密度阈值contamination，可调整异常点检测的灵敏度</p>
<p> 3、核心算法上官网查看<a target="_blank" rel="noopener" href="https://scikit-learn.org.cn/">https://scikit-learn.org.cn/</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/06/20/Mysql/%E6%A6%82%E8%AE%BA-%E5%85%B3%E7%B3%BB%E6%95%B0%E6%8D%AE%E5%BA%93%E6%A0%87%E5%87%86SQL%E8%AF%AD%E8%A8%80/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/4.png">
      <meta itemprop="name" content="xty">
      <meta itemprop="description" content="This is xty Blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello Programmer">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/06/20/Mysql/%E6%A6%82%E8%AE%BA-%E5%85%B3%E7%B3%BB%E6%95%B0%E6%8D%AE%E5%BA%93%E6%A0%87%E5%87%86SQL%E8%AF%AD%E8%A8%80/" class="post-title-link" itemprop="url">数据库概论复习-关系数据库标准语言SQL</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-06-20 00:00:00" itemprop="dateCreated datePublished" datetime="2021-06-20T00:00:00+00:00">2021-06-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-03-18 09:07:29" itemprop="dateModified" datetime="2022-03-18T09:07:29+00:00">2022-03-18</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/mysql/" itemprop="url" rel="index"><span itemprop="name">mysql</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><code>结构化查询语言（Structure QUery Language，SQL）</code>是关系数据库的标准语言</p>
<h3 id="一、SQL概述"><a href="#一、SQL概述" class="headerlink" title="一、SQL概述"></a>一、SQL概述</h3><p>大多数数据库均采用SQL作为共同的数据存取语言和标准接口</p>
<h4 id="1、SQL的产生与发展"><a href="#1、SQL的产生与发展" class="headerlink" title="1、SQL的产生与发展"></a>1、SQL的产生与发展</h4><p>目前没有任何一个数据库能支持SQL标准的所有概念特性，SQL标准的发展如下所示：</p>
<img src="https://cos-1301609895.cos.ap-nanjing.myqcloud.com/%E6%95%B0%E6%8D%AE%E5%BA%93%E6%A6%82%E8%AE%BA%E5%A4%8D%E4%B9%A0/table-3-1.png">

<h4 id="2、SQL的特点"><a href="#2、SQL的特点" class="headerlink" title="2、SQL的特点"></a>2、SQL的特点</h4><p>它功能极强而又简单易学，集<code>数据查询（data query）</code>、<code> 数据操纵（data manipulation）</code>、<code> 数据定义（data definition）</code>、<code> 数据控制（data control）</code>，其特点主要有以下几点：</p>
<ul>
<li><p>综合统一</p>
<p>集很多功能于一体，可以独立完成数据库生命周期中的全部活动</p>
</li>
<li><p>高度非过程化</p>
<p>只需提出做什么，无需了解存取路径，存取过程以及SQL的操作有系统完成</p>
</li>
<li><p>面向集合的操作方式</p>
<p>操作对象、查询结果、一次操作（插入、删除、更新）的对象也可以是集合</p>
</li>
<li><p>以同一种语法结构提供多种使用方式</p>
<p>SQL既是<code> 独立的语言（直接在键盘输入SQL命令进行操作）</code>，有时<code> 嵌入式的语言（嵌入到诸如Java、Python的高级语言中）</code></p>
</li>
<li><p>语法简洁，易学易用</p>
<p>完成核心动作仅需九个动词，接近英语口语</p>
</li>
</ul>
<p>SQL的动词如下所示：</p>
<img src="https://cos-1301609895.cos.ap-nanjing.myqcloud.com/%E6%95%B0%E6%8D%AE%E5%BA%93%E6%A6%82%E8%AE%BA%E5%A4%8D%E4%B9%A0/table-3-2.png">

<h4 id="3、SQL的基本概念"><a href="#3、SQL的基本概念" class="headerlink" title="3、SQL的基本概念"></a>3、SQL的基本概念</h4><p>支持数据库的三级模式结构：<code>外模式</code>、<code>模式</code>、<code>内模式</code>，其中外模式包括：<code> 视图（view）</code>、<code> 部分基本表（base table）</code>，模式包括<code> 若干基本表</code>，内模式包括<code> 若干存储文件（stored file）</code>。如下图所示：</p>
<img src="https://cos-1301609895.cos.ap-nanjing.myqcloud.com/%E6%95%B0%E6%8D%AE%E5%BA%93%E6%A6%82%E8%AE%BA%E5%A4%8D%E4%B9%A0/pic-3-1.png">

<p><code>基本表</code>和<code> 视图</code>一样，都是<code> 关系</code>，用户可以用SQL对<code> 基本表</code>和<code>视图</code>进行操作。</p>
<p><code>基本表</code>是本身独立存在表，一个<code> 关系</code>就对应一个<code> 基本表</code>，一个或多个<code> 基本表</code>对应一个存储文件，一个表可以带若干索引，索引也存放在存储文件中。</p>
<p><code>存储文件</code>的逻辑结构组成了关系数据库的<code> 内模式</code>。存储文件的物理结构对最终用户是隐蔽的</p>
<p><code>视图</code>是从一个或几个基本表导出的表</p>
<h3 id="二、学生课程数据库的定义"><a href="#二、学生课程数据库的定义" class="headerlink" title="二、学生课程数据库的定义"></a>二、学生课程数据库的定义</h3><ul>
<li>Student表</li>
</ul>
<img src="https://cos-1301609895.cos.ap-nanjing.myqcloud.com/%E6%95%B0%E6%8D%AE%E5%BA%93%E6%A6%82%E8%AE%BA%E5%A4%8D%E4%B9%A0/sudent.png">

<ul>
<li>Course表</li>
</ul>
<img src="https://cos-1301609895.cos.ap-nanjing.myqcloud.com/%E6%95%B0%E6%8D%AE%E5%BA%93%E6%A6%82%E8%AE%BA%E5%A4%8D%E4%B9%A0/course.png">

<ul>
<li>SC表</li>
</ul>
<img src="https://cos-1301609895.cos.ap-nanjing.myqcloud.com/%E6%95%B0%E6%8D%AE%E5%BA%93%E6%A6%82%E8%AE%BA%E5%A4%8D%E4%B9%A0/sc.png">

<h3 id="三、数据定义"><a href="#三、数据定义" class="headerlink" title="三、数据定义"></a>三、数据定义</h3><p>SQL的数据定义包括<code> 模式定义</code>、<code> 表定义</code>、<code> 视图定义</code>、<code> 索引定义</code>，如下图：</p>
<img src="https://cos-1301609895.cos.ap-nanjing.myqcloud.com/%E6%95%B0%E6%8D%AE%E5%BA%93%E6%A6%82%E8%AE%BA%E5%A4%8D%E4%B9%A0/table-3-3.png">

<p>SQL不提供修改模式定义和修改视图定义的操作，修改的话只能删除重建。</p>
<p><strong>一个关系数据库管理系统的实例（instance）中可以建立多个数据库，一个数据库可以建立多个模式，一个模式通常可以包括多个表、视图、索引等数据库对象。</strong></p>
<h4 id="1、模式的定义与删除"><a href="#1、模式的定义与删除" class="headerlink" title="1、模式的定义与删除"></a>1、模式的定义与删除</h4><h5 id="（1）定义模式"><a href="#（1）定义模式" class="headerlink" title="（1）定义模式"></a>（1）定义模式</h5><p>在SQL中，创建模式的定义语句如下：</p>
<blockquote>
<p>CREATE SCHEMA &lt;模式名&gt; AUTHORIZATION &lt;用户名&gt;;</p>
<p>如果没有指定&lt;模式名&gt;，则&lt;模式名&gt;隐含为&lt;用户名&gt;</p>
</blockquote>
<p>要创建模式，调用该命令的用户必须具有数据库管理员的权限，或者获得了数据库管理员授予的<code> CREATE SCHEMA</code>的权限</p>
<p><strong>例题</strong></p>
<ul>
<li><p>为用户WANG定义一个学生-课程模式S-T</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE SCHEMA &quot;S-T&quot; AUTHORIZATION WANG;</span><br></pre></td></tr></table></figure>
</li>
<li><p>为用户WANG创建一个模式TEST，并在其中定义一个表TAB1</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">CREATE SCHEMA TEST AUTHORIZATION ZHANG</span><br><span class="line">CREATE TABLE TAB1(</span><br><span class="line">	COL1 SMALLINT,</span><br><span class="line">  COL2 INT,</span><br><span class="line">  COL3 CHAR(20),</span><br><span class="line">  COL4 NUMBERIC(10, 3),</span><br><span class="line">  COL5 DECIMAL(5, 2)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>



</li>
</ul>
<h5 id="（2）删除模式"><a href="#（2）删除模式" class="headerlink" title="（2）删除模式"></a>（2）删除模式</h5><p>删除模式的语句定义如下：</p>
<blockquote>
<p>DROP TABLE &lt;模式名&gt; &lt;CASCADE | RESTRICT&gt;</p>
<p>其中<code> CASCADE</code>和<code> RESTRICT</code>两者必选其一，选择了<code> CASCADE（级联）</code>就表示在删除模式时会级联删除该模式下的所有数据库对象；选择了<code> RESTRICT（限制）</code>就表示如果模式中已经定义了下属的数据库对象（表、视图等），则拒绝该语句的执行</p>
</blockquote>
<p><strong>例题</strong></p>
<ul>
<li><p>删除ZHANG并级联删除该模式中的所有数据库对象</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DROP SCHEMA ZHANG CASCADE;</span><br></pre></td></tr></table></figure>



</li>
</ul>
<h4 id="2、基本表的定义、删除与修改"><a href="#2、基本表的定义、删除与修改" class="headerlink" title="2、基本表的定义、删除与修改"></a>2、基本表的定义、删除与修改</h4><h5 id="（1）定义基本表"><a href="#（1）定义基本表" class="headerlink" title="（1）定义基本表"></a>（1）定义基本表</h5>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/06/18/Wiki%E7%9F%A5%E8%AF%86%E5%BA%93%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/npm%E5%AE%89%E8%A3%85%E9%97%AE%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/4.png">
      <meta itemprop="name" content="xty">
      <meta itemprop="description" content="This is xty Blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello Programmer">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/06/18/Wiki%E7%9F%A5%E8%AF%86%E5%BA%93%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/npm%E5%AE%89%E8%A3%85%E9%97%AE%E9%A2%98/" class="post-title-link" itemprop="url">npm安装其他包报错</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-06-18 00:00:00" itemprop="dateCreated datePublished" datetime="2021-06-18T00:00:00+00:00">2021-06-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-03-18 09:07:29" itemprop="dateModified" datetime="2022-03-18T09:07:29+00:00">2022-03-18</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/npm/" itemprop="url" rel="index"><span itemprop="name">npm</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>错误描述：当我使用<code> npm install wangeditor@4.6.3</code>安装这个包是报如下错误，网上的各种诸如重新设置代理都不见效</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">npm ERR! code ECONNRESET</span><br><span class="line">npm ERR! errno ECONNRESET</span><br><span class="line">npm ERR! network request to http://registry.npmjs.org/wangeditor failed, reason: socket hang up</span><br><span class="line">npm ERR! network This is a problem related to network connectivity.</span><br><span class="line">npm ERR! network In most cases you are behind a proxy or have bad network settings.</span><br><span class="line">npm ERR! network </span><br><span class="line">npm ERR! network If you are behind a proxy, please make sure that the</span><br><span class="line">npm ERR! network &#x27;proxy&#x27; config is set properly.  See: &#x27;npm help config&#x27;</span><br><span class="line">npm ERR! A complete log of this run can be found in:</span><br><span class="line">npm ERR!     /Users/mr.stark/.npm/_logs/2021-06-18T08_44_30_596Z-debug.log</span><br></pre></td></tr></table></figure>
</blockquote>
<p>解决办法</p>
<p>正当我被折磨的死去活来想要放弃时，突然想到我之前用<code> brew</code>安装软件时遇到过类似的问题，原因是我用了<code> ClashX</code>这个软件，它启动时会生成一些环境变量，我们复制一下终端代理命令看看</p>
<img src="https://cos-1301609895.cos.ap-nanjing.myqcloud.com/npm-error.png">

<p>粘贴一下如下所示：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export https_proxy=http://127.0.0.1:7890 http_proxy=http://127.0.0.1:7890 all_proxy=socks5://127.0.0.1:7891</span><br></pre></td></tr></table></figure>

<p>接下来我们依次删除这三个环境变量即可</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">unset https_proxy</span><br><span class="line">unset http_proxy</span><br><span class="line">unset all_proxy</span><br></pre></td></tr></table></figure>

<p>接下来我们就可以开心的使用npm安装其他的包来使用啦！</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">+ wangeditor@4.6.3</span><br><span class="line">added 3 packages from 1 contributor, removed 16 packages, updated 1 package and audited 1327 packages in 21.52s</span><br><span class="line"></span><br><span class="line">89 packages are looking for funding</span><br><span class="line">  run `npm fund` for details</span><br></pre></td></tr></table></figure>




      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/06/15/%E7%AE%97%E6%B3%95%E5%88%B7%E9%A2%98/%E6%95%B0%E5%88%97%E6%9E%81%E5%B7%AE%E9%97%AE%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/4.png">
      <meta itemprop="name" content="xty">
      <meta itemprop="description" content="This is xty Blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello Programmer">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/06/15/%E7%AE%97%E6%B3%95%E5%88%B7%E9%A2%98/%E6%95%B0%E5%88%97%E6%9E%81%E5%B7%AE%E9%97%AE%E9%A2%98/" class="post-title-link" itemprop="url">力扣-数列极差问题</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-06-15 00:00:00" itemprop="dateCreated datePublished" datetime="2021-06-15T00:00:00+00:00">2021-06-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-03-18 09:07:29" itemprop="dateModified" datetime="2022-03-18T09:07:29+00:00">2022-03-18</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%88%B7%E9%A2%98/" itemprop="url" rel="index"><span itemprop="name">刷题</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>n个整数排成的数列，进行如下操作：每次擦去其中两个数a和b，然后在数列中加入一个数<code> a x b + 1</code>，如此下去直到黑板只剩一个数，在所有按这种操作方式最后得到的数中，最大的记作<code> max</code> ，最小的为<code> min</code>，则数列的极差定义为:<code> m = max - min</code> </p>
<p>分析：</p>
<blockquote>
<p>以三个数为例：a&gt;b&gt;c，这三个数计算有以下几种结果：</p>
<ul>
<li>( a x b + 1 ) x c + 1 = a x b x c + c +1</li>
<li>( a x c + 1 ) x b + 1 = a x b x c + b +1</li>
<li>( c x b + 1 ) x a + 1 = a x b x c + a +1</li>
</ul>
<p>由此可知：先运算小数据得到是大数据，先运算大数据得到的是小数据</p>
</blockquote>
<p>我们如是设计代码：用vector存储数据，计算最大数的时候，我们每次娶两个最小的数字计算再将结果<code> (min1*min2 + 1)</code>放入vector容器中，计算最小数字的时候与之相反即可。</p>
<p>接下来上代码：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//获取数字集中最小的数字并删除</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">getTheMin</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp;numbers)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//遍历</span></span><br><span class="line">    <span class="built_in">vector</span> &lt;<span class="keyword">int</span>&gt;::const_iterator i, j = numbers.begin();</span><br><span class="line">    <span class="keyword">int</span> min = *j;</span><br><span class="line">    <span class="keyword">for</span> (i = numbers.begin(); i != numbers.end(); ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span>(*i &lt; *j) &#123;</span><br><span class="line">            j = i;</span><br><span class="line">            min = *i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    numbers.erase(j);</span><br><span class="line">    <span class="keyword">return</span> min;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//获取数字集中最大的数字并删除</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">getTheMax</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp;numbers)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//遍历</span></span><br><span class="line">    <span class="built_in">vector</span> &lt;<span class="keyword">int</span>&gt;::const_iterator i, j = numbers.begin();</span><br><span class="line">    <span class="keyword">int</span> max = *j;</span><br><span class="line">    <span class="keyword">for</span> (i = numbers.begin(); i != numbers.end(); ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span>(*i &gt; *j) &#123;</span><br><span class="line">            j = i;</span><br><span class="line">            max = *i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    numbers.erase(j);</span><br><span class="line">    <span class="keyword">return</span> max;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//存储数据</span></span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; numbers_max;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; numbers_min;</span><br><span class="line">    <span class="comment">//元素个数</span></span><br><span class="line">    <span class="keyword">int</span> n, m;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">    <span class="comment">//输入</span></span><br><span class="line">    <span class="keyword">for</span>( <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++ ) &#123;</span><br><span class="line">        <span class="built_in">cin</span>&gt;&gt;m;</span><br><span class="line">        numbers_max.push_back(m);</span><br><span class="line">    &#125;</span><br><span class="line">    numbers_min = numbers_max;</span><br><span class="line">    <span class="comment">//获取最大值</span></span><br><span class="line">    <span class="keyword">while</span>(numbers_max.size() != <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">int</span> min1 = getTheMin(numbers_max);</span><br><span class="line">        <span class="keyword">int</span> min2 = getTheMin(numbers_max);</span><br><span class="line">        numbers_max.push_back(min1*min2 + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//获取最小值</span></span><br><span class="line">    <span class="keyword">while</span>(numbers_min.size() != <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">int</span> max1 = getTheMax(numbers_min);</span><br><span class="line">        <span class="keyword">int</span> max2 = getTheMax(numbers_min);</span><br><span class="line">        numbers_min.push_back(max1*max2 + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;最大值为：&quot;</span>&lt;&lt;numbers_max.back()&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;最小值为：&quot;</span>&lt;&lt;numbers_min.back()&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/06/14/Mysql/%E6%A6%82%E8%AE%BA-%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E5%85%A8%E6%80%A7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/4.png">
      <meta itemprop="name" content="xty">
      <meta itemprop="description" content="This is xty Blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello Programmer">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/06/14/Mysql/%E6%A6%82%E8%AE%BA-%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E5%85%A8%E6%80%A7/" class="post-title-link" itemprop="url">数据库概论复习-数据库安全性</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-06-14 00:00:00" itemprop="dateCreated datePublished" datetime="2021-06-14T00:00:00+00:00">2021-06-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-03-18 09:07:29" itemprop="dateModified" datetime="2022-03-18T09:07:29+00:00">2022-03-18</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/mysql/" itemprop="url" rel="index"><span itemprop="name">mysql</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>数据库的数据保护主要包括数据的<code>安全性</code>和 <code> 完整性</code>，本篇博客只介绍数据库的完整性。</p>
<h3 id="一、数据库安全性概述"><a href="#一、数据库安全性概述" class="headerlink" title="一、数据库安全性概述"></a>一、数据库安全性概述</h3><p><strong>数据库的安全性是指保护数据库以防止不合法使用所造成的数据泄露、更改或破坏。</strong></p>
<h4 id="1、数据库的不安全因素"><a href="#1、数据库的不安全因素" class="headerlink" title="1、数据库的不安全因素"></a>1、数据库的不安全因素</h4><ul>
<li>a、非授权用户对数据库的恶意存取或破坏</li>
<li>b、数据库中重要或敏感数据被泄露</li>
<li>c、安全环境的脆弱性</li>
</ul>
<h4 id="2、安全标准简介"><a href="#2、安全标准简介" class="headerlink" title="2、安全标准简介"></a>2、安全标准简介</h4><p><code> TCSEC/TDI（即紫皮书）</code>从四个方面描述了安全性级别的划分指标，即<code> 安全策略</code>、<code>责任</code>、<code> 保证</code>以及<code> 文档</code>。每个方面的细节又分为若干项。</p>
<img src="https://cos-1301609895.cos.ap-nanjing.myqcloud.com/review-database-safe1.png">

<p>根据计算机系统对各项指标的支持情况，<code> TCSEC/TDI</code>将系统划分为4组（division）7个等级，依次为：<code> D、C1、C2、···、A(A1)</code>，按照系统的可靠或可信程度逐渐增高，如下表所示：</p>
<img src="https://cos-1301609895.cos.ap-nanjing.myqcloud.com/review-database-safe2.png">

<ul>
<li><p>D级</p>
<p>最低级别，保留该级的目的是为了将一切不符合更高标准的操作系统统归于D组</p>
</li>
<li><p>C1级</p>
<p>能够实现对用户和数据的分离，进行自主存取控制（DAC），保护或限制用户权限的传播</p>
</li>
<li><p>C2级</p>
<p>安全产品的最低档，提供受控的存取保护</p>
</li>
<li><p>B1级</p>
<p>标记安全保护，对系统数据加以标记，并对标记的主体与客体实施强制存取控制（MAC）以及审计等安全机制</p>
</li>
<li><p>B2级</p>
<p>结构化保护，建立形式化的安全策略模型</p>
</li>
<li><p>B3级</p>
<p>安全域，该级的TCB（Trust Computing Base）必须满足访问监控器的要求，审计能力更强，并提供系统恢复过程</p>
</li>
<li><p>A1级</p>
<p>验证设计</p>
</li>
</ul>
<h3 id="二、数据库安全性控制"><a href="#二、数据库安全性控制" class="headerlink" title="二、数据库安全性控制"></a>二、数据库安全性控制</h3><h4 id="1、用户身份鉴别"><a href="#1、用户身份鉴别" class="headerlink" title="1、用户身份鉴别"></a>1、用户身份鉴别</h4><ul>
<li>静态口令鉴别</li>
<li>动态口令鉴别</li>
<li>生物特征鉴别</li>
<li>智能卡鉴别</li>
</ul>
<h4 id="2、存取控制"><a href="#2、存取控制" class="headerlink" title="2、存取控制"></a>2、存取控制</h4><p><strong>存取控制主要包括<code> 定义用户权限</code>和<code> 合法权限检查</code>两部分</strong></p>
<h5 id="（1）定义用户权限"><a href="#（1）定义用户权限" class="headerlink" title="（1）定义用户权限"></a>（1）定义用户权限</h5><p>用户对某一数据对象操作的权利称为权限</p>
<h5 id="（2）合法权限检查"><a href="#（2）合法权限检查" class="headerlink" title="（2）合法权限检查"></a>（2）合法权限检查</h5><p><strong><code> 定义用户权限</code>和<code>合法权限检查机制 </code>一起组成了数据库管理系统的存取控制子系统</strong></p>
<ul>
<li>C2级数据库管理系统支持<code> 自主存取控制（Discretionary Access Control，DAC）</code></li>
<li>B1级数据库管理系统支持<code> 强制存取控制（Mandatory Access Control，MAC）</code></li>
</ul>
<p>这两类方法的简单定义为：</p>
<p>（1）在<code> 自主存取控制方法</code>中，用户对于不同数据库对象有不同的存取权限，不同的用户对同一个对象也有不同的存储权限，而且用户还能将其拥有的权限转授给其他用户</p>
<p>（2）在<code>强制存取控制方法</code>中，每一个数据库对象被标以一定的密级，每一个用户授予某一个级别的许可证，对于任意对象，只有具有合法许可证的用户才能进行强制存取</p>
<h4 id="3、自助存取控制方法"><a href="#3、自助存取控制方法" class="headerlink" title="3、自助存取控制方法"></a>3、自助存取控制方法</h4><p>用户权限有两要素组成：<code> 数据库对象</code>和<code> 操作类型</code>，定义一个用户的存储权限就是定义该用户可以再那些数据库对象上进行哪些操作。数据自系统中，定义存取权限就称为<code> 授权（authorization）</code>。</p>
<p>在关系数据库系统中，存取控制的对象不仅有<code> 数据本身（基本表的数据、属性列上的数据）</code>，还有<code> 数据库模式（数据库、基本表、视图、索引的创建）</code>，如下图所示：</p>
<img src="https://cos-1301609895.cos.ap-nanjing.myqcloud.com/review-database-safe3.png">



<h4 id="4、授权：授予与收回"><a href="#4、授权：授予与收回" class="headerlink" title="4、授权：授予与收回"></a>4、授权：授予与收回</h4><h5 id="a、GRANT"><a href="#a、GRANT" class="headerlink" title="a、GRANT"></a>a、GRANT</h5><p>GRANT用于向用户授予权限，一般格式如下：</p>
<blockquote>
<p>GRANT &lt;权限&gt; [, &lt;权限&gt;]······</p>
<p>ON &lt;对象类型&gt; &lt;对象名&gt; [, &lt;对象类型&gt; &lt;对象名&gt;]······</p>
<p>TO &lt;用户&gt; [, &lt;用户&gt;]······</p>
<p>[ WITH GRANT OPTION ];</p>
</blockquote>
<p>其语义为：<code>将指定操作对象的指定操作权限授予指定的用户</code>，发出该语句的可以是：<code> 数据库管理员</code>、<code> 数据库创建者</code>、<code> 已经拥有该权限的用户</code>。接受该权限的可以是一个或者对个用户，也可以是PUBLIC（全体用户）。</p>
<p>若使用了<code> WITH GRANT OPTION子句，则获得这种权限的用户还可以把这种权限再授予给其他人，若没有使用</code> WITH GRANT OPTION子句，获得某种权限的用户只能使用该权限而不能传播。</p>
<p>SQL标准不允许循环授权，即被授权者不能将权限再授回给授权者或者其祖先：</p>
<img src="https://cos-1301609895.cos.ap-nanjing.myqcloud.com/review-database-safe4.png">

<p><strong>例题</strong></p>
<ul>
<li><p>把查询Student表的权限授予给用户UI</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> <span class="keyword">SELECT</span></span><br><span class="line"><span class="keyword">ON</span> <span class="keyword">TABLE</span> Student</span><br><span class="line"><span class="keyword">TO</span> UI;</span><br></pre></td></tr></table></figure>
</li>
<li><p>把对Student表和Course表的全部操作权限赋予给用户U2和U3</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> <span class="keyword">ALL</span> <span class="keyword">PRIVILEGES</span></span><br><span class="line"><span class="keyword">ON</span> <span class="keyword">TABLE</span> Student, Course</span><br><span class="line"><span class="keyword">TO</span> U2, U3;</span><br></pre></td></tr></table></figure>
</li>
<li><p>把对SC表的查询权限授予给所有用户</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> <span class="keyword">SELECT</span></span><br><span class="line"><span class="keyword">ON</span> <span class="keyword">TABLE</span> SC</span><br><span class="line"><span class="keyword">TO</span> <span class="keyword">PUBLIC</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>把查询Student表和修改学生学号的权限授给用户U4（对属性列授权时要明确指明属性列）</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> <span class="keyword">UPDATE</span>(Sno), <span class="keyword">SELECT</span></span><br><span class="line"><span class="keyword">ON</span> <span class="keyword">TABLE</span> Student</span><br><span class="line"><span class="keyword">TO</span> U4</span><br></pre></td></tr></table></figure>
</li>
<li><p>将对表SC的插入（INSERT）权限授予给U5，并允许该用户传播该权限</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> <span class="keyword">INSERT</span></span><br><span class="line"><span class="keyword">ON</span> <span class="keyword">TABLE</span> SC</span><br><span class="line"><span class="keyword">TO</span> U5</span><br><span class="line"><span class="keyword">WITH</span> <span class="keyword">GRANT</span> <span class="keyword">OPTION</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h5 id="b、REVOKE"><a href="#b、REVOKE" class="headerlink" title="b、REVOKE"></a>b、REVOKE</h5><p>授予用户的权限可以由数据库管理员或者其他授权者用REVOKE语句收回，该语句一般格式为：</p>
<blockquote>
<p>REVOKE &lt;权限&gt; [, &lt;权限&gt;]······</p>
<p>ON &lt;对象类型&gt; &lt;对象名&gt; [, &lt;对象类型&gt; &lt;对象名&gt;]······</p>
<p>FROM &lt;用户&gt; [, &lt;用户&gt;]······[ CASCADE | RESTRICT ];</p>
</blockquote>
<p>废话少说，直接上例题！</p>
<p><strong>例题</strong></p>
<ul>
<li><p>将用户U4修改学生学号的权限收回</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">REVOKE</span> <span class="keyword">UPDATE</span>(Sno)</span><br><span class="line"><span class="keyword">ON</span> <span class="keyword">TABLE</span> Student</span><br><span class="line"><span class="keyword">FROM</span> U4;</span><br></pre></td></tr></table></figure>
</li>
<li><p>收回所有用户对SC表的查询权限</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">REVOKE</span> <span class="keyword">SELECT</span></span><br><span class="line"><span class="keyword">ON</span> <span class="keyword">TABLE</span> SC</span><br><span class="line"><span class="keyword">FROM</span> <span class="keyword">PUBLIC</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>把用户U5对SC表的INSERT权限收回（将U5权限收回时，会级联收回U5赋予给其他用户的权限，如果其他用户从其他地方获得有对SC表的INSERT的权限则不影响，系统只回收直接或间接从U5获得的权限）</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">REVOKE</span> <span class="keyword">INSERT</span></span><br><span class="line"><span class="keyword">ON</span> <span class="keyword">TABLE</span> SC</span><br><span class="line"><span class="keyword">FROM</span> U5 <span class="keyword">CASCADE</span>;</span><br></pre></td></tr></table></figure>

<p>可见，用户可以“自主”地决定将数据的存储权限授予给何人，决定是否也将“授权”的权限授予别人，因此称之为<code> 自主存取控制</code></p>
</li>
</ul>
<h5 id="c、创建数据库模式的权限"><a href="#c、创建数据库模式的权限" class="headerlink" title="c、创建数据库模式的权限"></a>c、创建数据库模式的权限</h5><p><code> GRANT</code>和<code> REVOKE</code>语句用于向用户授予或回收对数据的操作权限，对创建数据库模式一类的数据库对象的授权则由数据库管理员在创建用户时实现</p>
<p><code> CREATE USER</code>语句格式一般如下：</p>
<blockquote>
<p>CREATE USER <username> [ WITH ] [ DBA | RESOURCE | CONNECT ];</p>
<ul>
<li>只有系统的超级用户才有权限创建一个新的数据库用户</li>
<li>新创建的数据库用户有三种权限：<code> CONNECT</code>、<code> RESOURCE</code>、<code> DBA</code> </li>
<li><code> GREATE USER</code>如果没有为新建的用户指定权限，则该用户默认拥有<code> CONNECT</code> 权限</li>
<li>拥有<code> RESOURCE</code>权限的用户能创建基本表和视图</li>
<li>拥有<code> DBA</code>权限的用户是系统中心的超级用户，可以创建新的用户、创建模式、创建基本表和视图等；DBA拥有所有对数据库对象的存储权限，还可以将这些权限授予给一般用户</li>
</ul>
</blockquote>
<p>使用下表进行总结：</p>
<img src="https://cos-1301609895.cos.ap-nanjing.myqcloud.com/review-database-safe5.png">



<h4 id="5、数据库角色"><a href="#5、数据库角色" class="headerlink" title="5、数据库角色"></a>5、数据库角色</h4><p>数据库角色是被命名的一组与数据库操作相关的权限，角色是权限的集合</p>
<h5 id="（1）角色的创建"><a href="#（1）角色的创建" class="headerlink" title="（1）角色的创建"></a>（1）角色的创建</h5><blockquote>
<p>CREATE ROLE &lt;角色名&gt;</p>
</blockquote>
<p>刚刚创建的角色是空的，可以使用GRANT为角色授权</p>
<h5 id="（2）给角色授权"><a href="#（2）给角色授权" class="headerlink" title="（2）给角色授权"></a>（2）给角色授权</h5><blockquote>
<p>GRANT &lt;权限&gt; [, &lt;权限&gt;]······</p>
<p>ON &lt;对象类型&gt; 对象名······</p>
<p>TO  &lt;角色&gt; [, &lt;角色&gt;]······</p>
</blockquote>
<p>数据库管理员和用户可以利用GRANT语句将权限授予给一个或几个角色</p>
<h5 id="（3）将一个角色授予其他角色或用户"><a href="#（3）将一个角色授予其他角色或用户" class="headerlink" title="（3）将一个角色授予其他角色或用户"></a>（3）将一个角色授予其他角色或用户</h5><blockquote>
<p>GRANT &lt;角色1&gt; [, &lt;角色2&gt;]······</p>
<p>TO &lt;角色3&gt; [, &lt;用户1&gt;]······</p>
<p>[ WITH ADMIN OPTION ]</p>
</blockquote>
<p>将角色授予给某用户或者其他角色，如果指定了<code> WITH ADMIN OPTION</code>子句，则获得某权限的角色或用户还可以将这种权限授予给其他的角色，一个角色的权限包括：<code> 直接授予给该角色权限 + 其他角色授予给该角色的权限</code>。</p>
<h5 id="（4）角色权限的收回"><a href="#（4）角色权限的收回" class="headerlink" title="（4）角色权限的收回"></a>（4）角色权限的收回</h5><blockquote>
<p>REVOKE &lt;权限&gt; [, &lt;权限&gt;]······</p>
<p>ON &lt;对象类型&gt; &lt;对象名&gt;</p>
<p>FROM &lt;角色&gt; [, &lt;角色&gt;]······</p>
</blockquote>
<p><strong>例题</strong></p>
<p>通过角色来将一组权限授予给用户</p>
<ul>
<li><p>1、创建一个角色R1</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">ROLE</span> R1;</span><br></pre></td></tr></table></figure>
</li>
<li><p>2、使用GRANT语句，使角色R1拥有Student表的SELECT、UPDATE、INSERT权限</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> <span class="keyword">SELECT</span>, <span class="keyword">UPDATE</span>, <span class="keyword">INSERT</span></span><br><span class="line"><span class="keyword">ON</span> <span class="keyword">TABLE</span> Student</span><br><span class="line"><span class="keyword">TO</span> R1;</span><br></pre></td></tr></table></figure>
</li>
<li><p>3、将这个角色授予给王平、张明、赵玲，使他们具有该角色的权限</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> R1</span><br><span class="line"><span class="keyword">TO</span> 王平, 张明, 赵玲;</span><br></pre></td></tr></table></figure>
</li>
<li><p>4、可以一次性的通过R1来收回王平的三个权限</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">REVOKE</span> R1</span><br><span class="line"><span class="keyword">FROM</span> 王平;</span><br></pre></td></tr></table></figure>
</li>
<li><p>5、角色权限的修改（去掉在Student表删除权限）</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> <span class="keyword">DELETE</span></span><br><span class="line"><span class="keyword">ON</span> <span class="keyword">TABLE</span> Student</span><br><span class="line"><span class="keyword">TO</span> R1;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>由此可以看出，数据库角色是一组权限的集合，可以简化授权的过程</p>
<h4 id="6、强制存取控制方法"><a href="#6、强制存取控制方法" class="headerlink" title="6、强制存取控制方法"></a>6、强制存取控制方法</h4><p>如果使用自主存取控制方法，甲将某些数据的存储权限授予给乙，乙就可备份这些数据，并传播这些副本。为了解决此类问题，我们就有了强制存取控制策略：对数据进行敏感性标记。</p>
<p>在这个系统中，数据库管理系统所管理的全部实体被分为主体和客体两大类：</p>
<ul>
<li>主体：系统中的活动实体，数据库管理系统所管理的实际用户，也包括代表用户的各进程</li>
<li>客体：系统中的被动实体，受主体操控，包括文件、基本表、索引、视图等</li>
</ul>
<p>对于主体和客体，数据库管理系统为他们每一个实例（值）指派了一个<code> 敏感度标记（label）</code></p>
<p>敏感度标记被分成若干级别，例如：<code> 绝密（Top Secret， TS）</code>、<code> 机密（Secret，S）</code>、<code> 可信（Confidential，C）</code>、<code> 公开（Public，P）</code>等，密级次序为<code> TS &gt;= S &gt;= C &gt;= P。</code>主体的敏感度称为<code> 许可证级别（clearance level）</code>，客体的敏感度等级称为` 密级（classification level）。</p>
<p><strong>强制存取方法就是通过对比主体和客体的敏感度标记来判断主体是否可以进行存取客体</strong></p>
<blockquote>
<p>（1）仅当主体的许可证级别大于或等于客体的密级时，该主体才能读取相应的客体</p>
<p>（2）仅当主体的许可证级别小于或等于客体的密级时，该主体才能写相应的客体强制存取控制是对数据本身进行密级标记</p>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/06/14/spring/Spring-%E4%BA%8B%E5%8A%A1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/4.png">
      <meta itemprop="name" content="xty">
      <meta itemprop="description" content="This is xty Blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello Programmer">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/06/14/spring/Spring-%E4%BA%8B%E5%8A%A1/" class="post-title-link" itemprop="url">spring-事务</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-06-14 00:00:00" itemprop="dateCreated datePublished" datetime="2021-06-14T00:00:00+00:00">2021-06-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-03-18 09:07:29" itemprop="dateModified" datetime="2022-03-18T09:07:29+00:00">2022-03-18</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Spring/" itemprop="url" rel="index"><span itemprop="name">Spring</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="一、什么事务"><a href="#一、什么事务" class="headerlink" title="一、什么事务"></a>一、什么事务</h3><p><code> 事务</code>是数据库操作的基本单元，也就说逻辑上的一组操作，要么都成功，如果有一个失败操作则全都失败。</p>
<h3 id="二、事务的四个特性（ACID）"><a href="#二、事务的四个特性（ACID）" class="headerlink" title="二、事务的四个特性（ACID）"></a>二、事务的四个特性（ACID）</h3><ul>
<li><p>原子性</p>
<p>要么都成功，要么都失败</p>
</li>
<li><p>一致性</p>
<p>操作之前和操作之后总量不变</p>
</li>
<li><p>隔离性</p>
<p>多事务操作时不过会相互产生影响</p>
</li>
<li><p>持久性</p>
<p>提交之后数据库中会发生改变</p>
</li>
</ul>
<h3 id="三、准备环节"><a href="#三、准备环节" class="headerlink" title="三、准备环节"></a>三、准备环节</h3><h4 id="1、创建数据库"><a href="#1、创建数据库" class="headerlink" title="1、创建数据库"></a>1、创建数据库</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">SET NAMES utf8mb4;</span><br><span class="line">SET FOREIGN_KEY_CHECKS &#x3D; 0;</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line">-- Table structure for t_account</span><br><span class="line">-- ----------------------------</span><br><span class="line">DROP TABLE IF EXISTS &#96;t_account&#96;;</span><br><span class="line">CREATE TABLE &#96;t_account&#96;  (</span><br><span class="line">    &#96;id&#96; varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,</span><br><span class="line">    &#96;username&#96; varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL,</span><br><span class="line">    &#96;money&#96; int(10) NULL DEFAULT NULL,</span><br><span class="line">    PRIMARY KEY (&#96;id&#96;) USING BTREE</span><br><span class="line">) ENGINE &#x3D; InnoDB CHARACTER SET &#x3D; utf8mb4 COLLATE &#x3D; utf8mb4_general_ci ROW_FORMAT &#x3D; Dynamic;</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line">-- Records of t_account</span><br><span class="line">-- ----------------------------</span><br><span class="line">INSERT INTO &#96;t_account&#96; VALUES (&#39;1&#39;, &#39;lusy&#39;, 1000);</span><br><span class="line">INSERT INTO &#96;t_account&#96; VALUES (&#39;2&#39;, &#39;mary&#39;, 1000);</span><br><span class="line"></span><br><span class="line">SET FOREIGN_KEY_CHECKS &#x3D; 1;</span><br></pre></td></tr></table></figure>

<h4 id="2、Service-And-Dao"><a href="#2、Service-And-Dao" class="headerlink" title="2、Service And Dao"></a>2、Service And Dao</h4><blockquote>
<p>创建Service，搭建Dao，完成对象创建和注入关系</p>
</blockquote>
<p>service注入dao，在dao注入JdbcTemplate，在JdbcTemplate注入DataSource</p>
<ul>
<li><p>service</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line">    <span class="comment">//注入Dao</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>dao</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserDao</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDaoImpl</span> <span class="keyword">implements</span> <span class="title">UserDao</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JdbcTemplate jdbcTemplate;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>bean.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 组件扫描 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.atguigu&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 数据库连接池配置 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span> <span class="attr">destroy-method</span>=<span class="string">&quot;close&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://ip:3306/user_db?useUnicode=true<span class="symbol">&amp;amp;</span>characterEncoding=UTF-8<span class="symbol">&amp;amp;</span>useSSL=false<span class="symbol">&amp;amp;</span>serverTimezone=Asia/Shanghai&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- JdbcTemplate对象 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;jdbcTemplate&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.core.JdbcTemplate&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 注入dataSource --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h4 id="3、创建方法"><a href="#3、创建方法" class="headerlink" title="3、创建方法"></a>3、创建方法</h4><ul>
<li><p>在dao中创建两个方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//多钱</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    String sql = <span class="string">&quot;update t_account set money = money + ? where username = ?&quot;</span>;</span><br><span class="line">    jdbcTemplate.update(sql, <span class="number">100</span>, <span class="string">&quot;mary&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//少钱</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">reduce</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    String sql = <span class="string">&quot;update t_account set money = money - ? where username = ?&quot;</span>;</span><br><span class="line">    jdbcTemplate.update(sql, <span class="number">100</span>, <span class="string">&quot;lucy&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在service添加如下方法模拟转账</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//模拟转账的方法</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">accountMoney</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//lucy少100</span></span><br><span class="line">    userDao.reduce();</span><br><span class="line">    <span class="comment">//mary多100</span></span><br><span class="line">    userDao.add();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>添加测试方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testAccount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">&quot;bean1.xml&quot;</span>);</span><br><span class="line">    UserService userService = context.getBean(<span class="string">&quot;userService&quot;</span>, UserService.class);</span><br><span class="line">    userService.accountMoney();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="四、事务操作过程"><a href="#四、事务操作过程" class="headerlink" title="四、事务操作过程"></a>四、事务操作过程</h3><h4 id="1、开启事务"><a href="#1、开启事务" class="headerlink" title="1、开启事务"></a>1、开启事务</h4><h4 id="2、进行业务操作"><a href="#2、进行业务操作" class="headerlink" title="2、进行业务操作"></a>2、进行业务操作</h4><h4 id="3、没有异常发生就提交事务"><a href="#3、没有异常发生就提交事务" class="headerlink" title="3、没有异常发生就提交事务"></a>3、没有异常发生就提交事务</h4><h4 id="4、出现异常就回退"><a href="#4、出现异常就回退" class="headerlink" title="4、出现异常就回退"></a>4、出现异常就回退</h4>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/06/11/Mysql/%E6%A6%82%E8%AE%BA-%E5%85%B3%E7%B3%BB%E6%95%B0%E6%8D%AE%E5%BA%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/4.png">
      <meta itemprop="name" content="xty">
      <meta itemprop="description" content="This is xty Blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello Programmer">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/06/11/Mysql/%E6%A6%82%E8%AE%BA-%E5%85%B3%E7%B3%BB%E6%95%B0%E6%8D%AE%E5%BA%93/" class="post-title-link" itemprop="url">数据库概论复习-关系数据库</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-06-11 00:00:00" itemprop="dateCreated datePublished" datetime="2021-06-11T00:00:00+00:00">2021-06-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-03-18 09:07:29" itemprop="dateModified" datetime="2022-03-18T09:07:29+00:00">2022-03-18</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/mysql/" itemprop="url" rel="index"><span itemprop="name">mysql</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="一、关系数据结构及形式化定义"><a href="#一、关系数据结构及形式化定义" class="headerlink" title="一、关系数据结构及形式化定义"></a>一、关系数据结构及形式化定义</h3><p><code>关系数据库系统</code>是支持关系模型的数据库系统，本篇将介绍介绍关系模型。关系模型由<code> 关系数据库</code>、<code> 关系操作集合</code>和<code> 关系完整性约束</code>组成。</p>
<h4 id="1、关系"><a href="#1、关系" class="headerlink" title="1、关系"></a>1、关系</h4><p>关系模型只包含单一的数据结构：<code> 关系</code>，下面我们从集合论的角度给出关系数据结构的形式化定义。</p>
<h5 id="a、域（domain）"><a href="#a、域（domain）" class="headerlink" title="a、域（domain）"></a>a、域（domain）</h5><blockquote>
<p>定义2.1：<code> 域</code>是一组具有相同数据类型的值的集合。例如：自然数、整数、{0、1}、{男、女}</p>
</blockquote>
<h5 id="b、笛卡尔积（cartesian-product）"><a href="#b、笛卡尔积（cartesian-product）" class="headerlink" title="b、笛卡尔积（cartesian product）"></a>b、笛卡尔积（cartesian product）</h5><blockquote>
<p>定义2.2：给定一组域D1、D2、、、D3，则该域的笛卡尔积为：</p>
<p>​            <code>D1 x D2 x ··· x Dn = &#123;(d1, d2, ··· dn) | di ∈ Di, i = 1, 2, ··· n &#125;</code></p>
</blockquote>
<p>其中，每一个元素<code> (d1, d2, ··· dn)</code>叫做一个<code> n元组(n-tuple)</code>，或简称<code> 元组(tuple)</code>，元素中的每一个值<code> di</code>叫做一个<code> 分量(component)</code>。<strong>一个域允许的不同的取值个数称为这个域的基数（cardinal number）。</strong></p>
<p>笛卡尔积可表示为一张二维表，表中的每一行对应一个元组，表中的每一列都来组一个域，如下给出三个域：</p>
<img src="https://cos-1301609895.cos.ap-nanjing.myqcloud.com/review-database1.png">

<p>则<code> D1、D2、D3</code>笛卡尔积为：</p>
<img src="https://cos-1301609895.cos.ap-nanjing.myqcloud.com/review-database2.png">

<p>其中<code> (张清玫, 计算机专业, 李勇)</code>是元组，<code> 张清玫、计算机砖业</code>都是分量。该笛卡尔积的基数为<code> 2x2x3=12</code>，也就是说共有12个元组，组成二维表如下：</p>
<img src="https://cos-1301609895.cos.ap-nanjing.myqcloud.com/review-database3.png"> 

<h5 id="c、关系（relation）"><a href="#c、关系（relation）" class="headerlink" title="c、关系（relation）"></a>c、关系（relation）</h5><blockquote>
<p>定义2.3：<code> D1 x D2 x ··· x Dn</code>的子集叫做在域<code> D1, D2, ··· Dn</code>上的关系，表示为<code> R(D1, D2, ··· Dn)</code> ，这里的R表示关系的名称，n是关系的目或度（degree）</p>
</blockquote>
<img src="https://cos-1301609895.cos.ap-nanjing.myqcloud.com/review-database4.png">

<p><strong>若关系中的某一组属性能够唯一的标识一个元组，而其子集不能，则称该属性组为<code> 候选码（candadate key）</code>，若一个关系有多个<code> 候选码</code>，则选定其中一个为主码（primary key）。</strong></p>
<p><strong>候选码的诸属性称为<code> 主属性（prime attribute）</code>。不包含在任何<code> 候选码</code>中的属性称为<code> 非主属性（non-prime attribute）</code>或者<code> 非码属性（non-key attribute）</code>。</strong></p>
<p>在最简单的情况下，<code> 候选码</code>只有一个属性，在最极端的情况下，关系模式中的所有属性是这个关系模式的候选码，称为<code> 全码（all-key）。</code>关系可以有三种类型：<code> 基本关系（通常又称为基本表或基表）</code>、<code> 查询表</code>和<code> 视图表</code>。基本关系具有以下六种性质：</p>
<img src="https://cos-1301609895.cos.ap-nanjing.myqcloud.com/review-database5.png">

<p><strong>关系的每一个分量为一个不可分的数据项</strong>，如下表不符合规范化的要求（表中有表）:</p>
<img src="https://cos-1301609895.cos.ap-nanjing.myqcloud.com/review-database6.png">



<h4 id="2、关系模式"><a href="#2、关系模式" class="headerlink" title="2、关系模式"></a>2、关系模式</h4><blockquote>
<p>关系的描述称为<code> 关系模式（relation schema）</code>，它可以形式化的表示为：<code> R(U, D, DOM, F)</code>，其中R为关系名，U为组成该关系的属性名集合，D为U所来自的域，DOM为属性向域的映像集合，F为属性间数据的依赖关系集合。</p>
</blockquote>
<p>关系是<code> 关系模式</code>在某一时刻的状态或内容，<code>关系模式</code>是静态的稳定的，而<code>关系</code>动态的随时间不断变化的。</p>
<h4 id="3、关系数据库"><a href="#3、关系数据库" class="headerlink" title="3、关系数据库"></a>3、关系数据库</h4><p>关系数据库也有值和型之分：</p>
<ul>
<li><strong><code> 关系数据库</code>的型也称为<code> 关系数据库模式</code>，是对关系数据库的描述</strong></li>
<li><strong><code> 关系数据库</code>的值是这些关系模式在某一时刻对应的关系集合，通常就称为<code> 关系数据库</code></strong></li>
</ul>
<h4 id="4、关系模型的存储结构"><a href="#4、关系模型的存储结构" class="headerlink" title="4、关系模型的存储结构"></a>4、关系模型的存储结构</h4><p>在关系数据库的物理组织中，有的关系数据库管理系统中的一个表对应一个操作系统文件，将物理数据组织交给操作系统；有的从操作系统申请若干个大的文件，自己划分空间，组织表、索引等存储结构，进行存储管理。</p>
<h3 id="二、关系操作"><a href="#二、关系操作" class="headerlink" title="二、关系操作"></a>二、关系操作</h3><p>关系模型给出了关系操作能力的说明，但没有对关系数据库管理语言做具体的语法要求。</p>
<h4 id="1、基本的关系操作"><a href="#1、基本的关系操作" class="headerlink" title="1、基本的关系操作"></a>1、基本的关系操作</h4><p>关系模型中常用的操作为：<code>查询（Query）</code>、<code>插入（Insert）</code>、<code> 删除（Delete）</code>、<code>修改（Update）</code></p>
<p>查询操作又分为：<code>选择（select）</code>、<code> 投影（project）</code>、<code>连接（join）</code>、<code>除（divide）</code>、<code>并（union）</code>、<code>差（except）</code>、<code>交（intersection）</code>和<code>笛卡尔积</code></p>
<p><strong>关系操作的对象和结果都是集合</strong></p>
<h4 id="2、关系数据语言的分类"><a href="#2、关系数据语言的分类" class="headerlink" title="2、关系数据语言的分类"></a>2、关系数据语言的分类</h4><img src="https://cos-1301609895.cos.ap-nanjing.myqcloud.com/review-database7.png">



<h3 id="三、关系的完整性"><a href="#三、关系的完整性" class="headerlink" title="三、关系的完整性"></a>三、关系的完整性</h3><p>关系模型的完整性规则是对关系的某种约束条件</p>
<p><strong>关系模型中有三类完整性约束：<code>实体完整性（entity integrity）</code>、<code>参照完整性（referential integrity）</code>、<code>用户定义的完整性（user-defined integrity）</code>，其中前两个是关系模型必须满足的完整性约束条件，被称为<code>关系的两个不变性</code></strong></p>
<h4 id="1、实体完整性"><a href="#1、实体完整性" class="headerlink" title="1、实体完整性"></a>1、实体完整性</h4><blockquote>
<p>规则2.1 实体完整性规则：<strong>若属性（指一个或一组属性）A是基本关系R的主属性，则A不能取空值（null value）</strong></p>
</blockquote>
<img src="https://cos-1301609895.cos.ap-nanjing.myqcloud.com/review-database8.png">

<p>说白了就是主属性不能为空</p>
<img src="https://cos-1301609895.cos.ap-nanjing.myqcloud.com/review-database9.png">



<h4 id="2、参照完整性"><a href="#2、参照完整性" class="headerlink" title="2、参照完整性"></a>2、参照完整性</h4><h4 id="3、用户定义的完整性"><a href="#3、用户定义的完整性" class="headerlink" title="3、用户定义的完整性"></a>3、用户定义的完整性</h4><h3 id="四、关系代数"><a href="#四、关系代数" class="headerlink" title="四、关系代数"></a>四、关系代数</h3><h4 id="1、传统的集合运算"><a href="#1、传统的集合运算" class="headerlink" title="1、传统的集合运算"></a>1、传统的集合运算</h4><h4 id="2、专门的运算关系"><a href="#2、专门的运算关系" class="headerlink" title="2、专门的运算关系"></a>2、专门的运算关系</h4><h5 id="a、选择（selection）"><a href="#a、选择（selection）" class="headerlink" title="a、选择（selection）"></a>a、选择（selection）</h5><h5 id="b、投影（projection）"><a href="#b、投影（projection）" class="headerlink" title="b、投影（projection）"></a>b、投影（projection）</h5><h5 id="c、连接（join）"><a href="#c、连接（join）" class="headerlink" title="c、连接（join）"></a>c、连接（join）</h5><h5 id="d、除运算（division）"><a href="#d、除运算（division）" class="headerlink" title="d、除运算（division）"></a>d、除运算（division）</h5>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/06/09/spring/JDBC-Template/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/4.png">
      <meta itemprop="name" content="xty">
      <meta itemprop="description" content="This is xty Blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello Programmer">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/06/09/spring/JDBC-Template/" class="post-title-link" itemprop="url">spring-JdbcTemplate</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-06-09 00:00:00" itemprop="dateCreated datePublished" datetime="2021-06-09T00:00:00+00:00">2021-06-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-03-18 09:07:29" itemprop="dateModified" datetime="2022-03-18T09:07:29+00:00">2022-03-18</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Spring/" itemprop="url" rel="index"><span itemprop="name">Spring</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="一、什么是JdbcTemplate"><a href="#一、什么是JdbcTemplate" class="headerlink" title="一、什么是JdbcTemplate"></a>一、什么是JdbcTemplate</h3><p>所谓<code> JdbcTemplate</code>，就是Spring框架对JDBC进行封装，使用<code> JdbcTemplate</code>方便实现对数据库的操作</p>
<h3 id="二、准备工作"><a href="#二、准备工作" class="headerlink" title="二、准备工作"></a>二、准备工作</h3><h4 id="1、引入相关Jar包"><a href="#1、引入相关Jar包" class="headerlink" title="1、引入相关Jar包"></a>1、引入相关Jar包</h4><p>链接: <a target="_blank" rel="noopener" href="https://pan.baidu.com/s/1hWsFROhJlzulOZpnuUgRHw">https://pan.baidu.com/s/1hWsFROhJlzulOZpnuUgRHw</a>  密码: 2q9k</p>
<h4 id="2、数据库连接池配置"><a href="#2、数据库连接池配置" class="headerlink" title="2、数据库连接池配置"></a>2、数据库连接池配置</h4><p>在<code> src</code>目录下新建<code> bean1.xml</code>文件，在里面加上以下配置信息：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 数据库连接池配置 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span> <span class="attr">destroy-method</span>=<span class="string">&quot;close&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql:///user_db&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h4 id="3、JdbcTemplate"><a href="#3、JdbcTemplate" class="headerlink" title="3、JdbcTemplate"></a>3、JdbcTemplate</h4><p>配置JdbcTemplate对象，注入DataSource</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- JdbcTemplate对象 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;jdbcTemplate&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.core.JdbcTemplate&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 注入dataSource --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h4 id="4、创建Service-And-Dao"><a href="#4、创建Service-And-Dao" class="headerlink" title="4、创建Service And Dao"></a>4、创建Service And Dao</h4><p>创建service类，创建dao类，在dao中注入jdbcTemplate对象。</p>
<h5 id="a、配置组件扫描"><a href="#a、配置组件扫描" class="headerlink" title="a、配置组件扫描"></a>a、配置组件扫描</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 组件扫描 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.atguigu&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="b、创建BookService"><a href="#b、创建BookService" class="headerlink" title="b、创建BookService"></a>b、创建BookService</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BookService</span> </span>&#123;</span><br><span class="line">    <span class="comment">//注入BookDao</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookDao bookDao;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="c、注入JdbcTemplate"><a href="#c、注入JdbcTemplate" class="headerlink" title="c、注入JdbcTemplate"></a>c、注入JdbcTemplate</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title">BookDao</span> </span>&#123;</span><br><span class="line">    <span class="comment">//注入JdbcTemplate</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JdbcTemplate jdbcTemplate;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="d、创建数据库表"><a href="#d、创建数据库表" class="headerlink" title="d、创建数据库表"></a>d、创建数据库表</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#96;&#96;&#96;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### 5、创建Entity实体类</span><br><span class="line"></span><br><span class="line">&#96;&#96;&#96;java</span><br><span class="line">public class Book &#123;</span><br><span class="line">    private Integer userId;</span><br><span class="line">    private String username;</span><br><span class="line">    private String ustatus;</span><br><span class="line">    &#x2F;&#x2F;getter and setter 方法</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="6、Dao"><a href="#6、Dao" class="headerlink" title="6、Dao"></a>6、Dao</h4><p>在Dao进行数据库添加操作，调用JdbcTemplate对象里的update方法实现添加操作：</p>
<p><code> int update(String var1, @Nullable Object... var2) throws DataAccessException;</code>：</p>
<p>参数说明：</p>
<ul>
<li>第一个参数：需要执行的sql语句</li>
<li>第二个参数：可变参数，设置sql语句值</li>
</ul>
<p>代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//添加的方法</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(Book book)</span> </span>&#123;</span><br><span class="line">  <span class="comment">//创建SQL语句</span></span><br><span class="line">  String sql = <span class="string">&quot;insert into t_book values(?, ?, ?)&quot;</span>;</span><br><span class="line">  <span class="comment">//调用方法实现</span></span><br><span class="line">  Object[] args = &#123;book.getUserId(), book.getUsername(), book.getUstatus()&#125;;</span><br><span class="line">  <span class="keyword">int</span> update = jdbcTemplate.update(sql, args);</span><br><span class="line">  System.out.println(update);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="7、测试一下"><a href="#7、测试一下" class="headerlink" title="7、测试一下"></a>7、测试一下</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestBook</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testAdd</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        ApplicationContext context =</span><br><span class="line">                <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">&quot;bean1.xml&quot;</span>);</span><br><span class="line">        BookService bookService = context.getBean(<span class="string">&quot;bookService&quot;</span>, BookService.class);</span><br><span class="line">        Book book = <span class="keyword">new</span> Book();</span><br><span class="line">        book.setUserId(<span class="number">1</span>);</span><br><span class="line">        book.setUsername(<span class="string">&quot;Java&quot;</span>);</span><br><span class="line">        book.setUstatus(<span class="string">&quot;sale&quot;</span>);</span><br><span class="line">        bookService.addBook(book);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>删除与修改与之类似</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/06/08/English/2021-06-08/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/4.png">
      <meta itemprop="name" content="xty">
      <meta itemprop="description" content="This is xty Blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello Programmer">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/06/08/English/2021-06-08/" class="post-title-link" itemprop="url">阅读笔记2021-06-08</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-06-08 00:00:00" itemprop="dateCreated datePublished" datetime="2021-06-08T00:00:00+00:00">2021-06-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-03-18 09:07:29" itemprop="dateModified" datetime="2022-03-18T09:07:29+00:00">2022-03-18</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/English/" itemprop="url" rel="index"><span itemprop="name">English</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="一、Vocabulary"><a href="#一、Vocabulary" class="headerlink" title="一、Vocabulary"></a>一、Vocabulary</h2><h3 id="1、exuberance"><a href="#1、exuberance" class="headerlink" title="1、exuberance"></a>1、exuberance</h3><p>n.丰富，充沛</p>
<h4 id="2、soaking"><a href="#2、soaking" class="headerlink" title="2、soaking"></a>2、soaking</h4><p>adj.湿透的，湿淋淋的</p>
<h4 id="4、crucial"><a href="#4、crucial" class="headerlink" title="4、crucial"></a>4、crucial</h4><p>adj.至关重要的，关键性的</p>
<h4 id="5、potentially"><a href="#5、potentially" class="headerlink" title="5、potentially"></a>5、potentially</h4><p>adv.潜在地</p>
<h4 id="6、inspire"><a href="#6、inspire" class="headerlink" title="6、inspire"></a>6、inspire</h4><p>v.激励，鼓舞，启发</p>
<h4 id="7、prime"><a href="#7、prime" class="headerlink" title="7、prime"></a>7、prime</h4><p>adj.首要的，头等的；n.最初，青年</p>
<h4 id="8、inconsequential"><a href="#8、inconsequential" class="headerlink" title="8、inconsequential"></a>8、inconsequential</h4><p>adj.微不足道的，细琐的</p>
<h4 id="9、bouquet"><a href="#9、bouquet" class="headerlink" title="9、bouquet"></a>9、bouquet</h4><p>n.花束，（尤指酒的）香味</p>
<h4 id="10、conductor"><a href="#10、conductor" class="headerlink" title="10、conductor"></a>10、conductor</h4><p>n.指挥；售票员；列车员；导体</p>
<h4 id="11、flux"><a href="#11、flux" class="headerlink" title="11、flux"></a>11、flux</h4><p>n.不断变化的</p>
<h4 id="12、fluff"><a href="#12、fluff" class="headerlink" title="12、fluff"></a>12、fluff</h4><p>adj.蓬松毛团；v.搞糟，弄砸</p>
<h4 id="13、workforce"><a href="#13、workforce" class="headerlink" title="13、workforce"></a>13、workforce</h4><p>n.劳动大军</p>
<h4 id="14、applicable"><a href="#14、applicable" class="headerlink" title="14、applicable"></a>14、applicable</h4><p>adj.适用的，合适的</p>
<h4 id="15、insufficient"><a href="#15、insufficient" class="headerlink" title="15、insufficient"></a>15、insufficient</h4><p>adj.不充分的，不够的</p>
<h4 id="16、hone"><a href="#16、hone" class="headerlink" title="16、hone"></a>16、hone</h4><p>v.磨炼；n.磨刀石</p>
<h2 id="二、Phrase"><a href="#二、Phrase" class="headerlink" title="二、Phrase"></a>二、Phrase</h2><h3 id="1、fire-up"><a href="#1、fire-up" class="headerlink" title="1、fire up"></a>1、fire up</h3><p>生火，点燃</p>
<h4 id="2、regardless-of"><a href="#2、regardless-of" class="headerlink" title="2、regardless of"></a>2、regardless of</h4><p>不顾，不惜</p>
<h2 id="三、SpecificNoun"><a href="#三、SpecificNoun" class="headerlink" title="三、SpecificNoun"></a>三、SpecificNoun</h2><h3 id="1、society’s-norm"><a href="#1、society’s-norm" class="headerlink" title="1、society’s norm"></a>1、society’s norm</h3><p>社会准则</p>
<h3 id="2、secondary-school"><a href="#2、secondary-school" class="headerlink" title="2、secondary school"></a>2、secondary school</h3><p>中学</p>
<h3 id="3、Commanding-Officer"><a href="#3、Commanding-Officer" class="headerlink" title="3、Commanding Officer"></a>3、Commanding Officer</h3><p>辅导员</p>
<h2 id="四、Sentence"><a href="#四、Sentence" class="headerlink" title="四、Sentence"></a>四、Sentence</h2><blockquote>
<p>In our early twenties, we’re all restless and in flux. If we can get more out of what college can truly offer, then our precious years and hefty（adj.大而重的；n.体壮力大的人） tuition（学费；讲授；教学） could form the bedrock for the rest of our lives-an investment that multiplies.</p>
</blockquote>
<p>在我们20岁出头时，我们都躁动不安，不断变化。如果我们能从大学真正能提供的东西里得到更多，那么我们宝贵的时光和高昂的学费将会成为我们余生的基石-一种成倍的投资。</p>
<blockquote>
<p>Take it as a challenge to hone you, not a blow to bring you down.</p>
</blockquote>
<p>千磨万击还坚韧，任尔东西南北风。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/06/08/Java/Java_%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/4.png">
      <meta itemprop="name" content="xty">
      <meta itemprop="description" content="This is xty Blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello Programmer">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/06/08/Java/Java_%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/" class="post-title-link" itemprop="url">Java网络编程</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-06-08 00:00:00" itemprop="dateCreated datePublished" datetime="2021-06-08T00:00:00+00:00">2021-06-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-03-18 09:07:29" itemprop="dateModified" datetime="2022-03-18T09:07:29+00:00">2022-03-18</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="一、网络编程基础知识"><a href="#一、网络编程基础知识" class="headerlink" title="一、网络编程基础知识"></a>一、网络编程基础知识</h3><h4 id="1、网络基础知识"><a href="#1、网络基础知识" class="headerlink" title="1、网络基础知识"></a>1、网络基础知识</h4><h4 id="2、IP地址和端口号"><a href="#2、IP地址和端口号" class="headerlink" title="2、IP地址和端口号"></a>2、IP地址和端口号</h4><h3 id="二、Java的基本网络支持"><a href="#二、Java的基本网络支持" class="headerlink" title="二、Java的基本网络支持"></a>二、Java的基本网络支持</h3><h4 id="1、使用InternetAddress"><a href="#1、使用InternetAddress" class="headerlink" title="1、使用InternetAddress"></a>1、使用InternetAddress</h4><h4 id="2、使用URLDecoder和URLEncoder"><a href="#2、使用URLDecoder和URLEncoder" class="headerlink" title="2、使用URLDecoder和URLEncoder"></a>2、使用URLDecoder和URLEncoder</h4><h4 id="3、URL、URLConnection和URLPermission"><a href="#3、URL、URLConnection和URLPermission" class="headerlink" title="3、URL、URLConnection和URLPermission"></a>3、URL、URLConnection和URLPermission</h4><h3 id="三、基于TCP协议的网络编程"><a href="#三、基于TCP协议的网络编程" class="headerlink" title="三、基于TCP协议的网络编程"></a>三、基于TCP协议的网络编程</h3><h4 id="1、TCP协议基础"><a href="#1、TCP协议基础" class="headerlink" title="1、TCP协议基础"></a>1、TCP协议基础</h4><h4 id="2、使用ServerSocket创建TCP服务器端"><a href="#2、使用ServerSocket创建TCP服务器端" class="headerlink" title="2、使用ServerSocket创建TCP服务器端"></a>2、使用ServerSocket创建TCP服务器端</h4><h4 id="3、使用Socket进行通信"><a href="#3、使用Socket进行通信" class="headerlink" title="3、使用Socket进行通信"></a>3、使用Socket进行通信</h4><h4 id="4、加入多线程"><a href="#4、加入多线程" class="headerlink" title="4、加入多线程"></a>4、加入多线程</h4><h4 id="5、记录用户信息"><a href="#5、记录用户信息" class="headerlink" title="5、记录用户信息"></a>5、记录用户信息</h4><h4 id="6、半关闭的Socket"><a href="#6、半关闭的Socket" class="headerlink" title="6、半关闭的Socket"></a>6、半关闭的Socket</h4><h4 id="7、使用NIO实现非阻塞的Socket通信"><a href="#7、使用NIO实现非阻塞的Socket通信" class="headerlink" title="7、使用NIO实现非阻塞的Socket通信"></a>7、使用NIO实现非阻塞的Socket通信</h4><h4 id="8、使用AIO实现非阻塞通信"><a href="#8、使用AIO实现非阻塞通信" class="headerlink" title="8、使用AIO实现非阻塞通信"></a>8、使用AIO实现非阻塞通信</h4><h3 id="四、基于UDP协议的网络编程"><a href="#四、基于UDP协议的网络编程" class="headerlink" title="四、基于UDP协议的网络编程"></a>四、基于UDP协议的网络编程</h3><h4 id="1、UDP协议基础"><a href="#1、UDP协议基础" class="headerlink" title="1、UDP协议基础"></a>1、UDP协议基础</h4><h4 id="2、使用DatagramSocket实现发送、接收数据"><a href="#2、使用DatagramSocket实现发送、接收数据" class="headerlink" title="2、使用DatagramSocket实现发送、接收数据"></a>2、使用DatagramSocket实现发送、接收数据</h4><h4 id="3、使用MulticastSocket实现多点广播"><a href="#3、使用MulticastSocket实现多点广播" class="headerlink" title="3、使用MulticastSocket实现多点广播"></a>3、使用MulticastSocket实现多点广播</h4><h3 id="五、使用代理服务器"><a href="#五、使用代理服务器" class="headerlink" title="五、使用代理服务器"></a>五、使用代理服务器</h3><h4 id="1、直接使用Proxy创建连接"><a href="#1、直接使用Proxy创建连接" class="headerlink" title="1、直接使用Proxy创建连接"></a>1、直接使用Proxy创建连接</h4><h4 id="2、使用ProxySelector自动选择代理服务器"><a href="#2、使用ProxySelector自动选择代理服务器" class="headerlink" title="2、使用ProxySelector自动选择代理服务器"></a>2、使用ProxySelector自动选择代理服务器</h4><h3 id="六、Java11标准化的Http-Client"><a href="#六、Java11标准化的Http-Client" class="headerlink" title="六、Java11标准化的Http Client"></a>六、Java11标准化的Http Client</h3><h4 id="1、发送同步的Get请求"><a href="#1、发送同步的Get请求" class="headerlink" title="1、发送同步的Get请求"></a>1、发送同步的Get请求</h4><h4 id="2、发送带请求体的请求"><a href="#2、发送带请求体的请求" class="headerlink" title="2、发送带请求体的请求"></a>2、发送带请求体的请求</h4><h4 id="3、发送异步请求"><a href="#3、发送异步请求" class="headerlink" title="3、发送异步请求"></a>3、发送异步请求</h4><h4 id="4、WebSocket客户端支持"><a href="#4、WebSocket客户端支持" class="headerlink" title="4、WebSocket客户端支持"></a>4、WebSocket客户端支持</h4><h4 id="5、基于WebSocket的多人实时聊天"><a href="#5、基于WebSocket的多人实时聊天" class="headerlink" title="5、基于WebSocket的多人实时聊天"></a>5、基于WebSocket的多人实时聊天</h4><h3 id="七、本章小结"><a href="#七、本章小结" class="headerlink" title="七、本章小结"></a>七、本章小结</h3>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/4/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><a class="extend next" rel="next" href="/page/6/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="xty"
      src="/images/4.png">
  <p class="site-author-name" itemprop="name">xty</p>
  <div class="site-description" itemprop="description">This is xty Blog</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">97</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">28</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">48</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/woshixty" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;woshixty" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">xty</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

        
<div class="busuanzi-count">
  <script data-pjax async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/pjax/pjax.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>

  <script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '.languages',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
  document.querySelectorAll('script[data-pjax], script#page-configurations, #pjax script').forEach(element => {
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (element.id) {
      script.id = element.id;
    }
    if (element.className) {
      script.className = element.className;
    }
    if (element.type) {
      script.type = element.type;
    }
    if (element.src) {
      script.src = element.src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (element.dataset.pjax !== undefined) {
      script.dataset.pjax = '';
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  NexT.utils.updateSidebarPosition();
});
</script>




  
  <script data-pjax>
    (function(){
      var canonicalURL, curProtocol;
      //Get the <link> tag
      var x=document.getElementsByTagName("link");
		//Find the last canonical URL
		if(x.length > 0){
			for (i=0;i<x.length;i++){
				if(x[i].rel.toLowerCase() == 'canonical' && x[i].href){
					canonicalURL=x[i].href;
				}
			}
		}
    //Get protocol
	    if (!canonicalURL){
	    	curProtocol = window.location.protocol.split(':')[0];
	    }
	    else{
	    	curProtocol = canonicalURL.split(':')[0];
	    }
      //Get current URL if the canonical URL does not exist
	    if (!canonicalURL) canonicalURL = window.location.href;
	    //Assign script content. Replace current URL with the canonical URL
      !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=canonicalURL,t=document.referrer;if(!e.test(r)){var n=(String(curProtocol).toLowerCase() === 'https')?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif";t?(n+="?r="+encodeURIComponent(document.referrer),r&&(n+="&l="+r)):r&&(n+="?l="+r);var i=new Image;i.src=n}}(window);})();
  </script>















    <div id="pjax">
  

  

    </div>
</body>
</html>
