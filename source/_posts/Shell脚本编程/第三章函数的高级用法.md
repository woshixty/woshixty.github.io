---
title: 函数的高级用法
date: 2021-10-30
tags: [shell]
categories: shell
---

### 一、函数的定义和使用

 #### 1、语法格式

<center>格式一<center>
<img src="https://cos-1301609895.cos.ap-nanjing.myqcloud.com/Shell%E8%84%9A%E6%9C%AC%E7%BC%96%E7%A8%8B/14%E8%AF%AD%E6%B3%95%E6%A0%BC%E5%BC%8F.png">

<center>格式二<center>
<img src="https://cos-1301609895.cos.ap-nanjing.myqcloud.com/Shell%E8%84%9A%E6%9C%AC%E7%BC%96%E7%A8%8B/15%E8%AF%AD%E6%B3%95%E6%A0%BC%E5%BC%8F.png">

#### 2、如何调用函数

- 直接使用函数名调用，可以将其想象成Shell的一条命令
- 函数内部可以使用参数` $1、$2、$3......$n` 
- 调用函数：` function_name  $1  $2`



#### 3、示例演示

- 创建函数

```shell
Test()
{
echo "Hello Test"
}
```

- 使用函数

```
Test
```



#### 4、小脚本（nginx守护进程）

写一个nginx脚本，如果nginx服务宕掉，则该服务可以检测并且将进程重新启动；如果正常运行，则不作任何处理

```shell
#!/bin/bash
#

this_pid=$$

while true
do
ps -ef | grep nginx | grep -v grep | grep -v $this_pid &> /dev/null

if [ $? -eq 0 ];then
	echo "Nginx is running well"
	sleep 3
else
	systemctl start nginx
	echo "Nginx is down,Start it...."
fi
done
```





### 二、向函数传递参数



### 三、函数的返回值



### 四、局部变量和全局变量



### 五、函数库

